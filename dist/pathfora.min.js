!function(e,t){var a,i=function(){var e=t.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href","//cdn.jsdelivr.net/pathforajs/latest/pathfora.min.css");var a=t.getElementsByTagName("head")[0];a.appendChild(e)},o=/[\t\r\n\f]/g,n=/\S+/g,s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,r={hasClass:function(e,t){return 1===e.nodeType&&(" "+e.className+" ").replace(o," ").indexOf(" "+t+" ")>=0?!0:!1},addClass:function(e,t){var a,i,r,l,c;if("string"==typeof t&&t&&(a=(t||"").match(n)||[],i=1===e.nodeType&&(e.className?(" "+e.className+" ").replace(o," "):" "))){for(l=0;r=a[l++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");c=null==i?"":(i+"").replace(s,""),e.className!==c&&(e.className=c)}},removeClass:function(e,t){var a,i,r,l,c;if("string"==typeof t&&t&&1===e.nodeType&&(a=(t||"").match(n)||[],i=e.className?(" "+e.className+" ").replace(o," "):"")){for(l=0;r=a[l++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");c=t?null==i?"":(i+"").replace(s,""):"",e.className!==c&&(e.className=c)}},readCookie:function(t){var a,i,o,n;for(a=t+"=",i=e.document.cookie.split(";"),o=0;o<i.length;o+=1){for(n=i[o];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(a))return n.substring(a.length,n.length)}return null},saveCookie:function(t,a,i){var o,n;i?(n=new Date,n.setTime(n.getTime()+24*i*60*60*1e3),o="; expires="+n.toGMTString()):o="",e.document.cookie=t+"="+a+o+"; path=/"},generateUniqueId:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},randomChoice:function(e){return e[Math.floor(Math.random()*e.length)]}},l={modal:"",slideout:"left",button:"top-left",bar:"top-fixed",folding:"bottom-left"},c={generic:{className:"pathfora",header:"",theme:"default",themes:{"default":{background:"#ddd",header:"#333",text:"#333",close:"#999",actionText:"#333",actionBackground:"#eee",cancelText:"#333",cancelBackground:"#eee"},dark:{background:"#ddd",header:"#333",text:"#333",close:"#999",actionText:"#333",actionBackground:"#eee",cancelText:"#333",cancelBackground:"#eee"},light:{background:"#ddd",header:"#333",text:"#333",close:"#999",actionText:"#333",actionBackground:"#eee",cancelText:"#333",cancelBackground:"#eee"}},displayConditions:{showOnInit:!0,showDelay:0,hideAfter:0,displayWhenElementVisible:"",scrollPercentageToDisplay:0}},message:{layout:"modal",position:"",variant:"1",cancelButton:!0,okMessage:"Confirm",cancelMessage:"Cancel",okShow:!0,cancelShow:!0},subscription:{layout:"modal",position:"",variant:"1",placeholders:{email:"Email"},okMessage:"Confirm",cancelMessage:"Cancel",okShow:!0,cancelShow:!0},form:{layout:"modal",position:"",variant:"1",nameField:!0,titleField:!1,placeholders:{name:"Name",title:"Title",email:"Email",message:"Message"},okMessage:"Send",cancelMessage:"Cancel",okShow:!0,cancelShow:!0}},d={pageViews:0,timeSpentOnPage:0,closedWidgets:[],completedActions:[],cancelledActions:[],displayedWidgets:[]},p={delayedWidgets:{},openedWidgets:[],initializedWidgets:[],watchers:[],initializeWidget:function(e){var t,a=e.displayConditions;a.displayWhenElementVisible?(t=p.registerElementWatcher(a.displayWhenElementVisible,e),p.watchers.push(t),p.initializeScrollWatchers(p.watchers)):a.scrollPercentageToDisplay?(t=p.registerPositionWatcher(a.scrollPercentageToDisplay,e),p.watchers.push(t),p.initializeScrollWatchers(p.watchers)):a.showOnInit&&pathfora.showWidget(e)},initializeScrollWatchers:function(t){p.scrollListener||(p.scrollListener=function(){for(var e in t)t.hasOwnProperty(e)&&null!==t[e]&&t[e].check()},"function"==typeof e.addEventListener?e.addEventListener("scroll",p.scrollListener,!1):e.onscroll=p.scrollListener)},removeScrollWatchers:function(t){t.forEach(function(e){p.removeWatcher(e)}),e.removeEventListener("scroll",p.scrollListener,!1),delete p.scrollListener},registerDelayedWidget:function(e){this.delayedWidgets[e.id]=setTimeout(function(){p.initializeWidget(e)},1e3*e.displayConditions.showDelay)},cancelDelayedWidget:function(e){var t=this.delayedWidgets[e.id];t&&(clearTimeout(t),delete this.delayedWidgets[e.id])},registerPositionWatcher:function(e,a){var i={check:function(){var o=t.body.offsetHeight*e/100;t.body.scrollTop>=o&&(pathfora.showWidget(a),p.removeWatcher(i))}};return i},registerElementWatcher:function(e,a){var i={elem:t.getElementById(e),check:function(){i.elem.offsetTop-window.innerHeight/2<=t.body.scrollTop&&(pathfora.showWidget(a),p.removeWatcher(i))}};return i},removeWatcher:function(e){for(var t in p.watchers)p.watchers.hasOwnProperty(t)&&e==p.watchers[t]&&p.watchers.splice(t,1)},constructWidgetLayout:function(a,i){if(null!=a.querySelector(".pf-widget-cancel")&&!i.cancelShow){var o=a.querySelectorAll(".pf-widget-cancel")[0];o.parentNode&&o.parentNode.removeChild(o)}if(null!=a.querySelector(".pf-widget-ok")&&!i.okShow){var o=a.querySelectorAll(".pf-widget-ok")[0];o.parentNode&&o.parentNode.removeChild(o)}switch(null!=a.querySelector(".pf-widget-cancel")&&(a.querySelector(".pf-widget-cancel").innerHTML=i.cancelMessage),null!=a.querySelector(".pf-widget-ok")&&(a.querySelector(".pf-widget-ok").innerHTML=i.okMessage),a.querySelector(".pf-widget-ok")&&null!=a.querySelector(".pf-widget-ok").value&&(a.querySelector(".pf-widget-ok").value=i.okMessage),a.querySelector(".pf-widget-cancel")&&null!=a.querySelector(".pf-widget-cancel").value&&(a.querySelector(".pf-widget-cancel").value=i.cancelMessage),i.type){case"form":switch(i.layout){case"folding":case"modal":case"slideout":case"random":a.querySelector("form").onsubmit=function(t){t.preventDefault(),p.trackWidgetAction("submit",i,t.target),e.pathfora.closeWidget(a.id,!0)},a.querySelectorAll("input")[0].placeholder=i.placeholders.name,a.querySelectorAll("input")[1].placeholder=i.placeholders.title,a.querySelectorAll("input")[2].placeholder=i.placeholders.email,a.querySelector("textarea").placeholder=i.placeholders.message;break;default:throw new Error("Invalid widget layout value")}case"subscription":switch(i.layout){case"folding":case"modal":case"bar":case"slideout":case"random":a.querySelector("form").onsubmit=function(t){t.preventDefault(),p.trackWidgetAction("subscribe",i,t.target),e.pathfora.closeWidget(a.id,!0)},a.querySelector("input").placeholder=i.placeholders.email;break;default:throw new Error("Invalid widget layout value")}case"message":switch(i.layout){case"modal":case"folding":case"slideout":case"random":for(var n=a.querySelectorAll(".pf-widget-header"),s=n.length-1;s>=0;s--)n[s].innerHTML=i.header;case"bar":if(i.image){var l=t.createElement("img");l.src=i.image,l.className="pf-widget-img",a.querySelector(".pf-widget-body").appendChild(l)}else r.addClass(a,"pf-no-img");case"button":a.querySelector(".pf-widget-message").innerHTML=i.msg;break;default:throw new Error("Invalid widget layout value")}}},constructWidgetActions:function(t,a){switch(a.layout){case"folding":var i=t.querySelectorAll(".pf-widget-caption, .pf-widget-caption-left");"left"!==a.position&&setTimeout(function(){t.style.bottom=-t.offsetHeight+"px"},0);for(var o=i.length-1;o>=0;o--)i[o].onclick=function(){r.hasClass(t,"opened")?r.removeClass(t,"opened"):r.addClass(t,"opened")};break;case"button":break;case"modal":case"slideout":case"bar":var n=t.querySelector(".pf-widget-cancel");t.querySelector(".pf-widget-close").onclick=function(){e.pathfora.closeWidget(t.id)},n&&(n.onclick="object"==typeof a.cancelAction?function(){p.trackWidgetAction("cancel",a),"function"==typeof a.cancelAction.callback&&a.cancelAction.callback(),e.pathfora.closeWidget(t.id,!0)}:function(){e.pathfora.closeWidget(t.id)})}"object"==typeof a.confirmAction?t.querySelector(".pf-widget-ok").onclick=function(){p.trackWidgetAction("confirm",a),"function"==typeof a.confirmAction.callback&&a.confirmAction.callback(),e.pathfora.closeWidget(t.id,!0)}:"message"===a.type&&(t.querySelector(".pf-widget-ok").onclick=function(){e.pathfora.closeWidget(t.id)})},setupWidgetColors:function(e,t){if(void 0===t.theme&&p.setCustomColors(e,c.generic.themes["default"]),t.config&&null===t.config.theme){var a={};p.updateObject(a,c.generic.themes["default"]),p.updateObject(a,t.config.colors),p.setCustomColors(e,a)}else if(t.themes){var a={};p.updateObject(a,c.generic.colors),p.updateObject(a,t.themes),p.setCustomColors(e,c.generic.themes[t.theme])}},setWidgetClassname:function(e,t){e.className="pf-widget pf-"+t.type+" pf-widget-"+t.layout+(t.position?" pf-position-"+t.position:"")+" pf-widget-variant-"+t.variant+(t.theme?" pf-theme-"+t.theme:"")},validateWidgetPosition:function(e,t){var a,i=function(e,t){return t.indexOf(e)>-1};switch(t.layout){case"modal":a=["",void 0];break;case"slideout":a=["left","right"];break;case"bar":a=["top-fixed","top-scrolling","bottom-scrolling"];break;case"button":a=["left","right","top-left","top-right","bottom-left","bottom-right"];break;case"folding":a=["left","bottom-left","bottom-right"]}i(t.position,a)||console.warn(t.position+" is not valid position for "+t.layout)},setupWidgetPosition:function(e,t){t.position?this.validateWidgetPosition(e,t):t.position=l[t.layout]},createWidgetHtml:function(e){var a=t.createElement("div");return a.innerHTML=g[e.type][e.layout]||"",a.id=e.id,this.setupWidgetPosition(a,e),this.constructWidgetActions(a,e),this.setWidgetClassname(a,e),this.constructWidgetLayout(a,e),this.setupWidgetColors(a,e),a},trackTimeOnPage:function(){p.tickHandler=setInterval(function(){d.timeSpentOnPage+=1},1e3)},checkIfUserJustEntered:function(){var e=r.readCookie("PathforaInit");return e?!1:(r.saveCookie("PathforaInit",!0,30),!0)},setCustomColors:function(e,t){var a=e.querySelector(".pf-widget-close"),i=e.querySelector(".pf-widget-header"),o=e.querySelector(".pf-widget-cancel"),n=e.querySelector(".pf-widget-ok");r.hasClass(e,"pf-widget-modal")?e.querySelector(".pf-widget-content").style.backgroundColor=t.background:e.style.backgroundColor=t.background,a&&(a.style.color=t.close),i&&(i.style.color=t.header),o&&(o.style.color=t.cancelText,o.style.backgroundColor=t.cancelBackground),n&&(n.style.color=t.actionText,n.style.backgroundColor=t.actionBackground),e.querySelector(".pf-widget-message").style.color=t.text},trackWidgetAction:function(e,t,a){var i={"pf-widget-id":t.id,"pf-widget-type":t.type,"pf-widget-layout":t.layout,"pf-widget-variant":t.variant};switch(e){case"show":d.displayedWidgets.push(i);break;case"close":d.closedWidgets.push(i);break;case"confirm":i["pf-widget-action"]=t.confirmAction.name,d.completedActions.push(i);break;case"cancel":i["pf-widget-action"]=t.cancelAction.name,d.cancelledActions.push(i);break;case"submit":var o=a;i["pf-form-username"]=o.elements.username.value,i["pf-form-title"]=o.elements.title.value,i["pf-form-email"]=o.elements.email.value,i["pf-form-message"]=o.elements.message.value;break;case"subscribe":o=a,i["pf-form-email"]=o.elements.email.value}i["pf-widget-event"]=e,f.reportData(i)},updateObject:function(e,t){for(var a in t)null!==typeof t[a]&&"object"==typeof t[a]?t.hasOwnProperty(a)&&(void 0===e[a]&&(e[a]={}),p.updateObject(e[a],t[a])):t.hasOwnProperty(a)&&(e[a]=t[a])},initializeWidgetArray:function(e){for(var t=0;t<e.length;t++){var a=e[t],i=c[a.type],o=c.generic;if(!(this.initializedWidgets.indexOf(a.id)<0))throw new Error("Cannot add two widgets with the same id");this.initializedWidgets.push(a.id),this.updateObject(a,o),this.updateObject(a,i),this.updateObject(a,a.config),a.displayConditions.showDelay?p.registerDelayedWidget(a):p.initializeWidget(a)}},validateWidgetsObject:function(e){if(!e)throw new Error("Widgets not specified");if(e.constructor!==Array&&e.target)for(var t=0;t<e.target.length;t++)if(!e.target[t].segment)throw new Error("All targeted widgets should have segment specified")},prepareWidget:function(e,t){if(void 0===t)throw new Error("Config object is missing");if(void 0===t.msg)throw new Error("Widget message is missing");var a={};if("random"===t.layout){var i={layout:["modal","slideout","bar","button","folding"],variant:["1","2"],slideout:["left","right"],bar:["top-fixed","top-scrolling","bottom-scrolling"],button:["left","right","top-left","top-right","bottom-left","bottom-right"],folding:["left","bottom-left","bottom-right"]};switch(e){case"message":var o=Math.floor(4*Math.random());t.layout=i.layout[o];break;case"subscription":for(var o=Math.floor(5*Math.random());3==o;)o=Math.floor(5*Math.random());t.layout=i.layout[o];break;case"form":for(var o=Math.floor(5*Math.random());2==o||3==o;)o=Math.floor(5*Math.random());t.layout=i.layout[o]}switch(t.layout){case"folding":t.position=i.folding[Math.floor(3*Math.random())],t.variant=i.variant[Math.floor(2*Math.random())];break;case"slideout":t.position=i.slideout[Math.floor(2*Math.random())],t.variant=i.variant[Math.floor(2*Math.random())];break;case"modal":t.variant=i.variant[Math.floor(2*Math.random())],t.position="";break;case"bar":t.position=i.bar[Math.floor(3*Math.random())];break;case"button":t.position=i.button[Math.floor(6*Math.random())]}}return a.type=e,a.config=t,a.id=t.id||r.generateUniqueId(),a}},f={initializeCustomAPI:function(){var e=r.readCookie("seerid");"object"==typeof jstag&&e&&jstag.send({user_id:e})},getData:function(e,t,a){var i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&200==i.status?t(i.responseText):4==i.readyState&&a(i.responseText)},i.open("GET",e),i.send()},postData:function(e,t,a,i){var o=new XMLHttpRequest;o.open("POST",e),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("Content-type","application/json"),o.onreadystatechange=function(){4==o.readyState&&200==o.status?a(o.responseText):4==o.readyState&&i(o.responseText)},o.send(t)},reportData:function(e){"object"==typeof jstag?jstag.send(e):"function"==typeof console&&console.warn("Cannot find Lytics tag, reporting disabled")},checkUserSegments:function(e,t){var a=r.readCookie("seerid");if(!a)throw new Error("Cannot find SEERID cookie");var i="https://api.lytics.io/api/me/"+e+"/"+a+"?segments=true";this.getData(i,function(e){var a=JSON.parse(e);t(a.data.segments)},function(e){console.error(e),t({data:{segments:["all"]}})})}},g={message:{modal:'<div class="pf-widget-container"><div class="pf-va-middle"><div class="pf-widget-content"><a class="pf-widget-close">&times;</a><h2 class="pf-widget-header"></h2><div class="pf-widget-body"><div class="pf-va-middle"><p class="pf-widget-message"></p><a class="pf-widget-btn pf-widget-ok">Confirm</a><a class="pf-widget-btn pf-widget-cancel">Cancel</a></div></div></div></div></div>',slideout:'<a class="pf-widget-close">&times;</a><div class="pf-widget-body"></div><div class="pf-widget-content"><h2 class="pf-widget-header"></h2><p class="pf-widget-message"></p><a class="pf-widget-btn pf-widget-cancel">Cancel</a><a class="pf-widget-btn pf-widget-ok">Confirm</a></div>',bar:'<a class="pf-widget-body"></a><a class="pf-widget-close">&times;</a><div class="pf-bar-content"><p class="pf-widget-message"></p><a class="pf-widget-btn pf-widget-ok">Confirm</a><a class="pf-widget-btn pf-widget-cancel">Cancel</a></div>',button:'<p class="pf-widget-message pf-widget-ok"></p>',inline:""},subscription:{modal:'<div class="pf-widget-container"><div class="pf-va-middle"><div class="pf-widget-content"><a class="pf-widget-close">&times;</a><h2 class="pf-widget-header"></h2><div class="pf-widget-body"><div class="pf-va-middle"><p class="pf-widget-message"></p><form><input name="email" type="email" required><button type="submit" class="pf-widget-btn pf-widget-ok">X</button></form></div></div></div></div></div>',slideout:'<a class="pf-widget-close">&times;</a><div class="pf-widget-body"></div><div class="pf-widget-content"><h2 class="pf-widget-header"></h2><p class="pf-widget-message"></p><form><input name="email" type="email" required><button type="submit" class="pf-widget-btn pf-widget-ok">X</button></form></div>',folding:'<a class="pf-widget-caption"><p class="pf-widget-header"></p><span>&rsaquo;</span></a><a class="pf-widget-caption-left"><p class="pf-widget-header"></p><span>&rsaquo;</span></a><div class="pf-widget-body"></div><div class="pf-widget-content"><p class="pf-widget-message"></p><form><input name="email" type="email" required><button type="submit" class="pf-widget-btn pf-widget-ok">X</button></form></div>',bar:'<a class="pf-widget-body"></a><a class="pf-widget-close">&times;</a><div class="pf-bar-content"><p class="pf-widget-message"></p><form><input name="email" type="email" required><input type="submit" class="pf-widget-btn pf-widget-ok" /></form></div>'},form:{modal:'<div class="pf-widget-container"><div class="pf-va-middle"><div class="pf-widget-content"><a class="pf-widget-close">&times;</a><h2 class="pf-widget-header"></h2><div class="pf-widget-body"><div class="pf-va-middle"><p class="pf-widget-message"></p><form><input name="username" type="text" required><input name="title" type="text"><input name="email" type="email" required><textarea name="message" rows="5" required></textarea><button type="submit" class="pf-widget-btn pf-widget-ok">Send</button><button class="pf-widget-btn pf-widget-cancel">Cancel</button> </form></div></div></div></div></div>',slideout:'<a class="pf-widget-close">&times;</a><div class="pf-widget-body"></div><div class="pf-widget-content"><h2 class="pf-widget-header"></h2><p class="pf-widget-message"></p><form><input name="username" type="text"><input name="title" type="text" required><input name="email" type="email" required><textarea name="message" rows="5" required></textarea> <button class="pf-widget-btn pf-widget-cancel">Cancel</button><button type="submit" class="pf-widget-btn pf-widget-ok">Send</button></form></div>',folding:'<a class="pf-widget-caption"><p class="pf-widget-header"></p><span>&rsaquo;</span></a><a class="pf-widget-caption-left"><p class="pf-widget-header"></p><span>&rsaquo;</span></a><div class="pf-widget-body"></div><div class="pf-widget-content"><p class="pf-widget-message"></p><form><input name="username" type="text" required><input name="title" type="text"><input name="email" type="email" required><textarea  name="message" rows="5" required></textarea> <button class="pf-widget-btn pf-widget-cancel">Cancel</button><button type="submit" class="pf-widget-btn pf-widget-ok">Send</button> </form></div>'}},u=function(){this.initializeWidgets=function(i,o,n){(!t.all||e.atob)&&(f.initializeCustomAPI(),p.validateWidgetsObject(i),p.trackTimeOnPage(),n&&(a=JSON.parse(JSON.stringify(c)),p.updateObject(c,n)),i.constructor===Array?p.initializeWidgetArray(i):(i.common&&(p.initializeWidgetArray(i.common),p.updateObject(c,i.common.config)),i.target&&f.checkUserSegments(o,function(e){for(var t=0;t<i.target.length;t++){var a=i.target[t];if(-1!==e.indexOf(a.segment)){p.initializeWidgetArray(a.widgets);break}}})))},this.previewWidget=function(e){return e.id=r.generateUniqueId(),p.createWidgetHtml(e)},this.Message=function(e){return p.prepareWidget("message",e)},this.Subscription=function(e){return p.prepareWidget("subscription",e)},this.Form=function(e){return p.prepareWidget("form",e)},this.showWidget=function(e){for(var a=0;a<p.openedWidgets.length;a++)if(p.openedWidgets[a]===e)return;p.openedWidgets.push(e),p.trackWidgetAction("show",e);var i=p.createWidgetHtml(e);t.body.appendChild(i),setTimeout(function(){r.addClass(i,"opened")},50),e.displayConditions.hideAfter&&setTimeout(function(){pathfora.closeWidget(e.id)},1e3*e.displayConditions.hideAfter)},this.closeWidget=function(e,a){for(var i=0;i<p.openedWidgets.length;i++)if(p.openedWidgets[i].id===e){a||p.trackWidgetAction("close",p.openedWidgets[i]),p.openedWidgets.splice(i,1);break}var o=t.getElementById(e);r.removeClass(o,"opened"),setTimeout(function(){o.parentNode&&o.parentNode.removeChild(o)},500)},this.getData=function(){return d},this.clearAll=function(){var e=p.openedWidgets;e.forEach(function(e){element=t.getElementById(e.id),r.removeClass(element,"opened"),element.parentNode.removeChild(element)}),e.slice(0);for(var i=p.delayedWidgets,o=i.length;o>-1;o--)p.cancelDelayedWidget(i[o]);p.openedWidgets=[],p.initializedWidgets=[],p.removeScrollWatchers(p.watchers),d={pageViews:0,timeSpentOnPage:0,closedWidgets:[],completedActions:[],cancelledActions:[],displayedWidgets:[]},a&&(c=a)},this.utils=r};i(),e.pathfora=new u,"object"==typeof pfCfg&&f.getData("https:"==t.location.protocol?"https":"http://pathfora.parseapp.com/config/"+pfCfg.uid+"/"+pfCfg.pid,function(e){var t=JSON.parse(e),a=t.widgets,i={};if("undefined"!=typeof t.config.themes)for(s=0;s<t.config.themes.length;s++)i[t.config.themes[s].name]=t.config.themes[s].colors;var o={generic:{themes:i}};console.log(t);var n=function(e){for(var t=0;t<e.length;t++)e[t]=p.prepareWidget(e[t].type,e[t])};n(a.common);for(var s=0;s<a.target.length;s++)n(a.target[s].widgets);pathfora.initializeWidgets(a,pfCfg.lid,o)})}(window,document);